<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://cdn.rawgit.com/konvajs/konva/1.5.0/konva.min.js"></script>
    <meta charset="utf-8">
    <title>Konva Linear Easing Demo</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #F0F0F0;
        }

    </style>
</head>

<body>
    <div id="container" onclick="addRect(event)"></div>
    <script>
        var width = window.innerWidth;
        var height = window.innerHeight;
        var widthRect;
        var heightRect;
        var stage = new Konva.Stage({
            container: 'container',
            width: width,
            height: height
        });
        var points = new Array();
        points[0] = new Array();
        points[1] = new Array();
        var layer = new Konva.Layer();

        function addRect(event) {  

            function addFirstPoint(event) {
                if (event.which == 1) {      
                    points[0][0] = [event.pageX];
                    points[0][1] = [event.pageY];
                    console.log("x " + event.pageX + " y " + event.pageY);
                    console.log(points[0]);    
                }
            };

            function addSecondtPoint(event) {
                if (event.which == 1) {       
                    points[1][0] = [event.pageX];
                    points[1][1] = [event.pageY];
                    console.log("x2 " + event.pageX + " y2 " + event.pageY);
                    console.log(points[0]);    
                }
            };

            if (points[0] == 0) {
                addFirstPoint(event);
            } else {
                addSecondtPoint(event);
            }

            widthRect = points[1][0] - points[0][0];
            heightRect = points[1][1] - points[0][1];
            
            var rect = new Konva.Rect({
                x: points[0][0],
                y: points[0][1],
                width: widthRect,
                height: heightRect,
                fill: 'green',
                stroke: 'black',
                strokeWidth: 2,
                opacity: 0.2
            });
            layer.add(rect);
            stage.add(layer);

            if (points[0] && points[1] != 0) {
                points[0].splice(0, points[0].length);
                points[1].splice(0, points[1].length);
                console.log(points[0], points[1]); 
            }
        };

    </script>

</body>

</html>
